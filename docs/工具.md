[TOC]

# 單文件組件

## 介紹

在很多 Vue  專案中，我們使用`Vue.component`來定義全域組件，接著使用`new Vue({el: '#container'})`在每個頁面內指定一個容器元素。

這種方式在很多中小型專案中運作的很好，因為 JavaScript 只被用來加強特定的 View。一旦運用在更複雜的專案中，或者你的前端完全由 JavaScript 驅動的時候，下面這些缺點將變得更明顯：

- **Global definitions**：強制要求每個 component 的命名不得重複。
- **String templates**：缺乏高亮的語法，在 HTML 有多行的時候，需要用到醜陋的`\`
- **No CSS Support**：當 HTML 和 JavaScript 組件化時，CSS 明顯被遺漏。
- **No build step**：限制只能使用 HTML 和 ES5 JavaScript，而不能使用預處理器，如 Pug, Babel

文件副檔名為`.vue`的 single-file components (單文件組件) 為以上所有問題提供了解決方法，並且還可以使用 webpack 或 Browserify 等建構工具。

文件名為`Hello.vue`的簡單實例：

```html
<template>
  <p>{{greeting}} World!</p>
</template>

<script>
  module.exports = {
    data: function() {
      return {
        greeting: 'Hello'
      };
    }
  };
</script>

<style scoped>
  p {
    font-size: 2em;
    text-align: center;
  }
</style>
```

現在我們獲得：

- [完整的高亮語法](https://github.com/vuejs/awesome-vue#source-code-editing)
- [CommonJS 模組](https://webpack.js.org/concepts/modules/#what-is-a-webpack-module)
- [組件作用域的 CSS](https://vue-loader.vuejs.org/zh-cn/features/scoped-css.html)

我們還可以使用預處理器來構建簡潔和功能更豐富的組件，如 Pub, Babel (width ES2015 modules) 和 Stylus。

```html
<template lang="pug">
div
  p {{greeting}} World!
  other-component
</template>

<script>
  import OtherComponent from './Other-Component.vue';

  export default {
    data() {
      return {
        greeting: 'Hello'
      };
    },
    components: {
      OtherComponent
    }
  };
</script>

<style lang="stylus" scoped>
  p
    font-size: 2em
    text-align: center
</style>
```

這些特定的語言只是舉例，你可以只是簡單地使用 Babel, TypeScript, SCSS, PostCSS 或其它預處理器。如果使用 webpack 搭配`vue-loader`，它也能為 CSS Modules 提供更好的支援。

### 如何看待關注點分離

注意！**關注點分離不等於文件類型分離**。在現代 UI 開發中，我們已經發現相較於把原始碼分離成三個大的層次 (HTML, JavaScript, Styles) 並將其相互交織起來，把它們劃分為鬆散耦合的組件再將其組合起來更合理一些。因為在一個組件裡，它的模板、邏輯和樣式是內部耦合的，並且把它們放在一起可以讓組件更好維護。

即便你不喜歡單文件組件，你仍然可以把 JavaScript, CSS 分離成獨立的文件然後做到 hot-reloading 和 pre-compilation。

```html
<!-- my-component.vue -->
<template>
  <div>This will be pre-compiled</div>
</template>
<script src="./my-component.js"></script>
<style src="./my-component.css"></style>
```

## 起步

### 例子沙盒

### 針對剛接觸 JavaScript 模組開發系統的用戶

### 針對高級用戶

# 單元測試

# TypeScript 支持

# 生產環境部署
